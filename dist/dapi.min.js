!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var EntityQuery=require("./entityQuery");module.exports.entityQuery=EntityQuery},{"./entityQuery":2}],2:[function(require,module,exports){var Sort=require("./queryOption/sort"),Condition=require("./queryOption/condition"),ConditionGroup=require("./queryOption/conditionGroup"),Exists=require("./queryOption/exists"),EntityQuery=function(){this.children=[],this.count=!1,this.hasRange=!1,this.start=null,this.length=null};EntityQuery.prototype.range=function(start,length){return this.hasRange=!0,this.start=start,this.length=length||this.length,this},EntityQuery.prototype.condition=function(field,value,operator,langcode){return this.children.push(new Condition(field,value,operator,langcode)),this},EntityQuery.prototype.sort=function(field,direction,langcode){return this.children.push(new Sort(field,direction,langcode)),this},EntityQuery.prototype.exists=function(field,langcode){return this.children.push(new Exists(field,langcode,!0)),this},EntityQuery.prototype.notExists=function(field,langcode){return this.children.push(new Exists(field,langcode,!1)),this},EntityQuery.prototype.andConditionGroup=function(){var len=this.children.push(new ConditionGroup("AND"));return this.children[len-1]},EntityQuery.prototype.orConditionGroup=function(){var len=this.children.push(new ConditionGroup("OR"));return this.children[len-1]},EntityQuery.prototype.getQueryString=function(){return this.compile().map(this.paramToString).join("&")},EntityQuery.prototype.compile=function(){var counter={},parameters=[];return this.children.forEach(function(child){child_id=counter[child.type]||0,child.attach(child_id,parameters),counter[child.type]=child_id+1}),this.hasRange&&(parameters.push({key:"range",name:"start",value:this.start}),this.length&&parameters.push({key:"range",name:"length",value:this.length})),parameters},EntityQuery.prototype.paramToString=function(param){return param.key+"["+param.name+"]="+param.value},module.exports=EntityQuery},{"./queryOption/condition":3,"./queryOption/conditionGroup":4,"./queryOption/exists":5,"./queryOption/sort":6}],3:[function(require,module,exports){var Condition=function(field,value,operator,langcode){this.type="condition",this.field=field,this.value=value,this.operator=operator?operator:"=",this.langcode=langcode?langcode:null};Condition.prototype.mapOperator=function(op){return dict={"=":"EQ","<>":"NOTEQ",">":"GT",">=":"GTEQ","<":"LT","<=":"LTEQ"},op in dict?dict[op]:op},Condition.prototype.attach=function(id,query){var parameters=[];parameters.push({name:"field",value:this.field}),parameters.push({name:"value",value:this.value}),parameters.push({name:"operator",value:this.mapOperator(this.operator)}),this.langcode&&parameters.push({name:"langcode",value:this.langcode}),Array.prototype.push.apply(query,parameters.map(function(parameter){return parameter.key="condition_"+id,parameter}))},module.exports=Condition},{}],4:[function(require,module,exports){var Condition=require("./condition.js"),Exists=require("./exists.js"),ConditionGroup=function(conjunction,group){this.type="group",this.conjunction=conjunction?conjunction:"AND",group&&(this.group=group),this.children=[]};ConditionGroup.prototype.attach=function(id,query){var parameters=[];parameters.push({name:"conjunction",value:this.conjunction}),this.group&&parameters.push({name:this.type,value:this.group}),Array.prototype.push.apply(query,parameters.map(function(parameter){return parameter.key=this.type+"_"+id,parameter},this)),this.children.forEach(function(child,n){var child_id=""+id+n;child.attach(child_id,query),query.push({name:"group",value:"group_"+id,key:child.type+"_"+child_id})})},ConditionGroup.prototype.condition=function(field,value,operator,langcode){return this.children.push(new Condition(field,value,operator,langcode)),this},ConditionGroup.prototype.exists=function(field,langcode){return this.children.push(new Exists(field,langcode,!0)),this},ConditionGroup.prototype.notExists=function(field,langcode){return this.children.push(new Exists(field,langcode,!1)),this},ConditionGroup.prototype.andConditionGroup=function(){var len=this.children.push(new ConditionGroup("AND"));return this.children[len-1]},ConditionGroup.prototype.orConditionGroup=function(){var len=this.children.push(new ConditionGroup("OR"));return this.children[len-1]},module.exports=ConditionGroup},{"./condition.js":3,"./exists.js":5}],5:[function(require,module,exports){var Exists=function(field,langcode,condition){this.type="exists",this.field=field,this.langcode=langcode?langcode:null,this.condition=void 0==condition?!0:condition};Exists.prototype.attach=function(id,query){var parameters=[],conditionValue=this.condition?"TRUE":"FALSE";parameters.push({name:"field",value:this.field}),parameters.push({name:"condition",value:conditionValue}),this.langcode&&parameters.push({name:"langcode",value:this.langcode}),Array.prototype.push.apply(query,parameters.map(function(parameter){return parameter.key=this.type+"_"+id,parameter},this))},module.exports=Exists},{}],6:[function(require,module,exports){var Sort=function(field,direction,langcode){this.field=field,this.direction=direction?direction:"ASC",this.langcode=langcode?langcode:null};Sort.prototype.attach=function(id,query){var parameters=[];parameters.push({name:"field",value:this.field}),parameters.push({name:"direction",value:this.direction}),this.langcode&&parameters.push({name:"langcode",value:this.langcode}),Array.prototype.push.apply(query,parameters.map(function(parameter){return parameter.key="sort_"+id,parameter}))},module.exports=Sort},{}]},{},[1]);
